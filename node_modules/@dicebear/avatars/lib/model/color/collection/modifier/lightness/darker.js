"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var color_1 = require("../../../../color");
/**
 * Ensures that the selected color is darker than a reference color.
 */
var Darker = /** @class */ (function () {
    function Darker(primaryCollection, secondaryCollection, difference) {
        this.pickedColors = {};
        this.primaryCollection = primaryCollection;
        this.secondaryCollection = secondaryCollection;
        this.difference = difference;
    }
    Darker.prototype.get = function (random) {
        if (this.pickedColors[random.seed]) {
            return this.pickedColors[random.seed];
        }
        var primaryColor = this.primaryCollection.get(random);
        var secondaryColor = this.secondaryCollection.get(random);
        var primaryColorHsv = primaryColor.hsv;
        var secondaryColorHsv = secondaryColor.hsv;
        if (primaryColorHsv[2] <= secondaryColorHsv[2] - this.difference) {
            return (this.pickedColors[random.seed] = primaryColor);
        }
        primaryColorHsv[2] = secondaryColorHsv[2] - this.difference;
        if (primaryColorHsv[2] < 0) {
            primaryColorHsv[2] = 0;
        }
        // Create new color instance and preserve alpha
        this.pickedColors[random.seed] = new color_1.default('hsv(' + primaryColorHsv.join(',') + ')');
        this.pickedColors[random.seed].alpha = primaryColor.alpha;
        return this.pickedColors[random.seed];
    };
    return Darker;
}());
exports.default = Darker;
//# sourceMappingURL=darker.js.map